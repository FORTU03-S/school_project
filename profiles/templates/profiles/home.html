{% extends 'base.html' %}

{% block title %}Accueil{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="p-5 mb-4 bg-light rounded-3 shadow-sm">
        <div class="container-fluid py-5 text-center">
            {% if message %}
                <div class="alert alert-warning" role="alert">
                    {{ message }}
                </div>
            {% endif %}
            <h1 class="display-5 fw-bold">Bienvenue à School Project !</h1>
            <p class="col-md-8 fs-4 mx-auto">
                Accédez à votre portail personnalisé ou explorez nos services.
            </p>
            {% if not user.is_authenticated %}
                <a href="{% url 'login' %}" class="btn btn-primary btn-lg me-2">Se connecter</a>
                <a href="{% url 'register_choice' %}" class="btn btn-outline-secondary btn-lg">S'inscrire</a>
            {% else %}
                <p class="fs-4">Vous êtes connecté en tant que {{ user.username }}.</p>
                <p class="fs-5">Votre rôle : {{ user.user_type|default:"Non assigné" }}</p>
                {# Le code de redirection dans views.py devrait vous amener à votre tableau de bord #}
                <p>Si vous n'êtes pas redirigé, cliquez sur votre tableau de bord :</p>
                {% if user.user_type == 'PARENT' %}
                    <a href="{% url 'parent_dashboard' %}" class="btn btn-info btn-lg">Mon Espace Parent</a>
                {% elif user.user_type == 'TEACHER' %}
                    <a href="{% url 'teacher_dashboard' %}" class="btn btn-info btn-lg">Mon Espace Enseignant</a>
                {% elif user.user_type == 'DIRECTION' or user.user_type == 'ADMIN' %}
                    <a href="{% url 'direction_dashboard' %}" class="btn btn-info btn-lg">Tableau de Bord Direction</a>
                {% elif user.user_type == 'ACCOUNTANT' %}
                    <a href="{% url 'accounting_dashboard' %}" class="btn btn-info btn-lg">Tableau de Bord Comptabilité</a>
                {% endif %}
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}